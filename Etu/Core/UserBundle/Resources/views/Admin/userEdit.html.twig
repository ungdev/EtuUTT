{% extends 'EtuCoreBundle:Admin:layout.html.twig' %}

{% block title %}{{ 'user.admin.userEdit.title'|trans }}{% endblock %}

{% block titleIcon %}
    <img src="{{ asset('assets/img/titles/gear.png') }}" alt="{{ 'base.logo.alt'|trans }}" title="{{ 'base.logo.title'|trans }}" class="page-title-icon" />
{% endblock %}

{% block javascripts %}
    <script src="{{ asset('assets/js/bundles/user.js') }}" type="text/javascript"></script>
{% endblock %}

{% block content %}
    <ul class="nav nav-tabs page-tabs">
        <li>
            <a href="{{ path('user_view', {'login': user.login}) }}?from=admin">
                <i class="icon-chevron-left"></i>
                {{ 'user.admin.userEdit.back'|trans }}
            </a>
        </li>
    </ul>

    <div class="padding20-sides">

        {# Avatar form #}
        <div style="display: none;">
            {{ form_start(avatarForm) }}
            {{ form_widget(avatarForm) }}
            {{ form_end(avatarForm) }}
            <iframe id="avatar-upload-frame" name="avatar-upload-frame" src="#"></iframe>
        </div>

        <div class="row-fluid">
            <div class="span2 offset4">
                <a href="#" id="avatar-upload-link" title="{{ 'user.profile.profileEdit.avatar'|trans }}">
                    <div class="profileEdit-avatar-actions">
                        <i class="icon-pencil"></i>
                    </div>
                    <img src="{{ path('user_view_image_profil', {'avatar': user.avatar}) }}" class="profileEdit-avatar"
                         alt="{{ user.fullName }}" id="avatar-image" />
                </a>
            </div>
            <div class="span6 profileEdit-fixedValue">
                <p>
                    <strong>{{ user.fullName }}</strong>
                    <br />
                    <small class="muted">
                        <em>
                            {{ user.login }}
                            {% if user.studentId %}
                                - {{ user.studentId }}
                            {% endif %}
                        </em>
                    </small>
                </p>

                {% if user.niveau or user.filiere or user.formation %}
                <p>
                    {{ user.branch~user.niveau }} {{ user.filiere }} ({{ user.formation }})
                </p>
                {% endif %}

                {% if user.mail %}
                <p>
                    <a href="mailto:{{ user.mail }}">{{ user.mail }}</a>
                </p>
                {% endif %}
            </div>
        </div>

        <hr/>
        {{ form_start(form) }}

            <div class="row-fluid">
                <div class="span6 privacy-layout">
                    <div class="field">{{ form_row(form.personnalMail) }}</div>
                    <div class="privacy">{{ form_row(form.personnalMailPrivacy) }}</div>
                </div>
                <div class="span6 privacy-layout">
                    <div class="field">{{ form_row(form.phoneNumber) }}</div>
                    <div class="privacy">{{ form_row(form.phoneNumberPrivacy) }}</div>
                </div>
            </div>
            <hr/>

            <div class="row-fluid">
                <div class="span6 privacy-layout">
                    <div class="field">{{ form_row(form.address) }}</div>
                    <div class="privacy">{{ form_row(form.addressPrivacy) }}</div>
                </div>
                <div class="span6 privacy-layout">
                    <div class="field">{{ form_row(form.postalCode) }}</div>
                    <div class="privacy">{{ form_row(form.postalCodePrivacy) }}</div>
                </div>
            </div>
            <div class="row-fluid">
                <div class="span6 privacy-layout">
                    <div class="field">{{ form_row(form.city) }}</div>
                    <div class="privacy">{{ form_row(form.cityPrivacy) }}</div>
                </div>
                <div class="span6 privacy-layout">
                    <div class="field">{{ form_row(form.country) }}</div>
                    <div class="privacy">{{ form_row(form.countryPrivacy) }}</div>
                </div>
            </div>
            <hr/>

            <div class="row-fluid">
                <div class="span6 privacy-layout">
                    <div class="field">{{ form_row(form.nationality) }}</div>
                    <div class="privacy">{{ form_row(form.nationalityPrivacy) }}</div>
                </div>
                <div class="span6 privacy-layout">
                    <div class="field">{{ form_row(form.birthday) }}</div>
                    <div class="privacy">{{ form_row(form.birthdayPrivacy) }}</div>
                </div>
            </div>
            <div class="row-fluid">
                <div class="span6 privacy-layout">
                    <div class="field">{{ form_row(form.sex) }}</div>
                    <div class="privacy">{{ form_row(form.sexPrivacy) }}</div>
                </div>
                <div class="span6">
                    {{ form_row(form.birthdayDisplayOnlyAge) }}
                </div>
            </div>
            <hr/>

            <div class="row-fluid">
                <div class="span6">
                    {{ form_row(form.website) }}
                </div>
                <div class="span6">
                    {{ form_row(form.facebook) }}
                </div>
            </div>
            <div class="row-fluid">
                <div class="span6">
                    {{ form_row(form.twitter) }}
                </div>
                <div class="span6">
                    {{ form_row(form.linkedin) }}
                </div>
            </div>
            <div class="row-fluid">
                <div class="span6">
                    {{ form_row(form.viadeo) }}
                </div>
            </div>
        {{ form_end(form) }}
    </div>
{% endblock %}
